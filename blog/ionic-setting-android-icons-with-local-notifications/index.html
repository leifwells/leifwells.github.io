<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Scully 0.0.90">
    <meta charset="utf-8">
    <title>Leif Wells: Blog-o-rama</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&amp;display=swap" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.877b1d74a16e50324e73.css"><style></style><style>.main-nav[_ngcontent-lpp-c10]   .title-container[_ngcontent-lpp-c10]{background-color:#fff;box-shadow:1px 3px 3px #d3d3d3;color:#000;display:flex;flex-direction:column;height:60px;left:0;position:fixed;right:0;text-align:center;text-decoration:none;z-index:999}.main-nav[_ngcontent-lpp-c10]   .title-container[_ngcontent-lpp-c10]   .title[_ngcontent-lpp-c10]{font-size:1.4rem;line-height:1.5rem;margin-top:10px}@media (min-width:600px){.main-nav[_ngcontent-lpp-c10]   .title-container[_ngcontent-lpp-c10]   .title[_ngcontent-lpp-c10]{font-size:.8rem;line-height:.9rem;margin-top:10px}}.main-nav[_ngcontent-lpp-c10]   .title-container[_ngcontent-lpp-c10]   .sub-title[_ngcontent-lpp-c10]{display:none}@media (min-width:600px){.main-nav[_ngcontent-lpp-c10]   .title-container[_ngcontent-lpp-c10]   .sub-title[_ngcontent-lpp-c10]{display:inline;font-size:.6rem;line-height:.8rem;margin-top:20px}}@media (min-width:600px){.main-nav[_ngcontent-lpp-c10]   .title-container[_ngcontent-lpp-c10]{text-align:center;width:100vw}.main-nav[_ngcontent-lpp-c10]   .title-container[_ngcontent-lpp-c10]   .title[_ngcontent-lpp-c10]{font-size:2rem}}.main-nav[_ngcontent-lpp-c10]   .main-container[_ngcontent-lpp-c10]{background-color:#fff;padding-top:65px}.main-nav[_ngcontent-lpp-c10]   .main-container.dark-theme[_ngcontent-lpp-c10]{background-color:#4f4f4f}.main-nav[_ngcontent-lpp-c10]   .main-container[_ngcontent-lpp-c10]   .page-container[_ngcontent-lpp-c10]{background-color:#000;margin:0 15px}@media (min-width:600px){.main-nav[_ngcontent-lpp-c10]   .main-container[_ngcontent-lpp-c10]   .page-container[_ngcontent-lpp-c10]{margin:0 20%}}</style><style>.footer[_ngcontent-lpp-c9]{display:flex;flex-direction:column;text-align:center;width:100vw}.footer[_ngcontent-lpp-c9]   .copyright-container[_ngcontent-lpp-c9]{text-align:center;margin:0 25%;width:50%}.footer[_ngcontent-lpp-c9]   .copyright-container[_ngcontent-lpp-c9]   p[_ngcontent-lpp-c9]{font-size:.6rem;line-height:.8rem;margin:0;padding:0}</style><style>.social-media[_ngcontent-lpp-c8]{display:block;margin:0}.social-media[_ngcontent-lpp-c8]   .social-icon[_ngcontent-lpp-c8]{color:#000}.social-media[_ngcontent-lpp-c8]   ul.social-icons[_ngcontent-lpp-c8]{margin:0;padding:0}.social-media[_ngcontent-lpp-c8]   .social-icons[_ngcontent-lpp-c8]   li[_ngcontent-lpp-c8]{display:inline;vertical-align:top}.social-media[_ngcontent-lpp-c8]   .social-icons[_ngcontent-lpp-c8]   a[_ngcontent-lpp-c8]{color:#000;text-decoration:none}.social-media[_ngcontent-lpp-c8]   .fa-facebook[_ngcontent-lpp-c8]{padding:10px 14px;transition:.5s;background-color:#fff}.social-media[_ngcontent-lpp-c8]   .fa-facebook[_ngcontent-lpp-c8]:hover{background-color:#3d5b99}.social-media[_ngcontent-lpp-c8]   .fa-twitter[_ngcontent-lpp-c8]{padding:10px 12px;transition:.5s;background-color:#fff}.social-media[_ngcontent-lpp-c8]   .fa-twitter[_ngcontent-lpp-c8]:hover{background-color:#00aced}.social-media[_ngcontent-lpp-c8]   .fa-rss[_ngcontent-lpp-c8]{padding:10px 14px;transition:.5s;background-color:#fff}.social-media[_ngcontent-lpp-c8]   .fa-rss[_ngcontent-lpp-c8]:hover{background-color:#eb8231}.social-media[_ngcontent-lpp-c8]   .fa-youtube[_ngcontent-lpp-c8]{padding:10px 14px;transition:.5s;background-color:#fff}.social-media[_ngcontent-lpp-c8]   .fa-youtube[_ngcontent-lpp-c8]:hover{background-color:#e64a41}.social-media[_ngcontent-lpp-c8]   .fa-linkedin[_ngcontent-lpp-c8]{padding:10px 14px;transition:.5s;background-color:#fff}.social-media[_ngcontent-lpp-c8]   .fa-linkedin[_ngcontent-lpp-c8]:hover{background-color:#0073a4}.social-media[_ngcontent-lpp-c8]   .fa-github[_ngcontent-lpp-c8]{padding:10px 14px;transition:.5s;background-color:#fff}.social-media[_ngcontent-lpp-c8]   .fa-github[_ngcontent-lpp-c8]:hover{background-color:#5a32a3}</style><style>.post-page[_ngcontent-lpp-c12]{display:flex;flex-direction:row;height:100%}@media (min-width:600px){.post-page[_ngcontent-lpp-c12]{margin:0 15vw}.post-page[_ngcontent-lpp-c12]   img[_ngcontent-lpp-c12]{padding:0 25px;width:45vw}}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]{height:100%;width:100%}@media (min-width:600px){.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]{min-height:85vh;width:65vw}}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .post-title[_ngcontent-lpp-c12]{margin:0 15px;font-size:1.5rem;line-height:1.8rem}@media (min-width:600px){.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .post-title[_ngcontent-lpp-c12]{margin:0 30px}}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .post-date[_ngcontent-lpp-c12]{margin:0 15px;font-size:.8rem;line-height:1rem}@media (min-width:600px){.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .post-date[_ngcontent-lpp-c12]{margin:0 30px}}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .article-body[_ngcontent-lpp-c12]{margin:0 15px}@media (min-width:600px){.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .article-body[_ngcontent-lpp-c12]{padding:0 15px}}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .post-image-container[_ngcontent-lpp-c12]{background-color:grey;background-position:50% 25%;background-size:cover;height:120px}@media (min-width:600px){.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   .post-image-container[_ngcontent-lpp-c12]{height:14rem}}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   img[_ngcontent-lpp-c12]{height:auto;width:95vw}@media (min-width:600px){.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   img[_ngcontent-lpp-c12]{width:55vw}}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   img[_ngcontent-lpp-c12] + em[_ngcontent-lpp-c12]{font-style:normal;display:inherit;text-align:center;font-size:90%}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   pre[_ngcontent-lpp-c12]{background-color:#000;color:#fff;overflow:scroll;padding:15px}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   blockquote[_ngcontent-lpp-c12]{background-color:#dbdbdb;border-left:6px solid #a0a0a0;margin:10px;padding:10px}.post-page[_ngcontent-lpp-c12]   .post[_ngcontent-lpp-c12]   blockquote[_ngcontent-lpp-c12]   p[_ngcontent-lpp-c12]{margin-left:15px}</style><style>
      :host {
        display: none;
      }
      scully-content {
        display: none;
      }
    </style><script>window['ScullyIO']='generated';</script></head>
  <body scully-version="0.0.90">
    <app-root _nghost-lpp-c11="" ng-version="9.1.0"><app-main-nav _ngcontent-lpp-c11="" _nghost-lpp-c10=""><div _ngcontent-lpp-c10="" class="main-nav"><a _ngcontent-lpp-c10="" href="/index.html" class="title-container"><div _ngcontent-lpp-c10="" class="title">Leif's Development Blog-o-rama</div><div _ngcontent-lpp-c10="" class="sub-title"> This is the place where Leif writes stuff down for other developers to read. Also, it is how he remembers stuff. And things. </div></a><div _ngcontent-lpp-c10="" class="main-container"><router-outlet _ngcontent-lpp-c10=""></router-outlet><app-blog _nghost-lpp-c12=""><div _ngcontent-lpp-c12="" class="post-page">
  <article _ngcontent-lpp-c12="" class="post">
    <header _ngcontent-lpp-c12="">
      <div _ngcontent-lpp-c12="" width="{!(isHandset$ | async) ? '630px' : '100vw'}" height="{!(isHandset$ | async) ? '120px' : 'auto'}" class="post-image-container" style="background-image: url(&quot;/assets/images/2016-07-09-cheers.png&quot;);"></div>
      <h1 _ngcontent-lpp-c12="" class="post-title">Setting Android Icons with Local Notifications</h1>
      <h3 _ngcontent-lpp-c12="" class="post-date"><i _ngcontent-lpp-c12="" class="fa fa-calendar-check-o"></i> May 30, 2016 <!----></h3>
    </header>
    <div _ngcontent-lpp-c12="" class="article-body">
      <!--scullyContent-begin--><p _ngcontent-lpp-c12="">My <a href="/2016/05/28/lessons-learned-unnamed-project-2016-05/" _ngcontent-lpp-c12="">previous post</a> lamented my ignorance about setting up Android icons for Local Notifications in an Ionic 1 project. I found a lot of speculation in my Google search as to how to handle them but not a lot of explanation or examples. In this post I am presenting the results of the research I completed on this topic during a recent project.</p>
<h2 id="understanding-how-notifications-work-on-android" _ngcontent-lpp-c12="">Understanding How Notifications Work on Android</h2>
<p _ngcontent-lpp-c12="">The Android platform a notification requires two icons. Lets take a look at Figure 1 to identify them:</p>
<p _ngcontent-lpp-c12="">{{&lt; figure src="/images/android_notification_icons_example.png" title="Figure 1: Where the Android notification icons appear"&gt;}}</p>
<br _ngcontent-lpp-c12="">
As you can see, there is an icon (1) that appears in the status bar as well as in the notification listing (2) along side another larger icon (3).

<p _ngcontent-lpp-c12="">Lets take a look at the typical notification code that might appear in a service in your application:</p>
<pre _ngcontent-lpp-c12=""><code class="language-js" _ngcontent-lpp-c12="">var setUpNotification = function(note) {
  var deferred = $q.defer();

  $cordovaLocalNotification
    .schedule({
      id: note.id,
      at: note.at,
      text: note.text,
      title: note.title,
      sound: "file://audio/notification.wav",
      badge: 1,
      data: "hello=world",
      autoClear: false,
      icon: "res://icon.png",
      smallIcon: "res://ic_stat_notify.png"
    })
    .then(
      function(result) {
        console.log(note.title + " Notification Set");
        deferred.resolve(result);
      },
      function(error) {
        console.log("setUpNotification ERROR: " + error);
        deferred.reject(error);
      }
    );

  return deferred.promise;
};</code></pre>
<p _ngcontent-lpp-c12="">In the code above the object being sent to the plugin has an <code _ngcontent-lpp-c12="">icon</code> and an <code _ngcontent-lpp-c12="">smallIcon</code> property.</p>
<p _ngcontent-lpp-c12="">The <code _ngcontent-lpp-c12="">icon</code> is the large icon that appears in the notifications listing. Typically this icon is the same as your application's icon so that there is a visual association between the notification and the application that scheduled it.</p>
<p _ngcontent-lpp-c12="">The <code _ngcontent-lpp-c12="">smallIcon</code> property sets the small icon that appears in two places: in the status bar when a notification occurs and next to the larger icon in the notifications listing to visually associate the icon in the status bar with both the notification and the application.</p>
<h2 id="where-do-these-icons-go" _ngcontent-lpp-c12="">Where Do These Icons Go?</h2>
<p _ngcontent-lpp-c12="">In that code sample, notice that the links to these icons are prefixed with <code _ngcontent-lpp-c12="">res://</code>. That means these icons are located in the <code _ngcontent-lpp-c12="">platforms/android/res</code> folder which is where the icons for each screen density reside. The <code _ngcontent-lpp-c12="">res</code> folder has several folders in it with names like <code _ngcontent-lpp-c12="">drawable-hdpi</code> and inside each of these folders there should already be a file named <code _ngcontent-lpp-c12="">icon.png</code>. When you build the Android platform using the Ionic CLI, images located <code _ngcontent-lpp-c12="">resources/android/icon</code> folder renamed and copied into the proper <code _ngcontent-lpp-c12="">drawable</code> folder. When your application runs on Android, these folders are used to provide the proper icons for the device's resolution.</p>
<p _ngcontent-lpp-c12="">Let me try to make this more succinct:</p>
<ul _ngcontent-lpp-c12="">
<li _ngcontent-lpp-c12=""><p _ngcontent-lpp-c12="">The images for the <code _ngcontent-lpp-c12="">icon</code> property are in your <code _ngcontent-lpp-c12="">resources/android/icons</code> folder, automatically created for you by Ionic. You should update those images for your application and when you use the <code _ngcontent-lpp-c12="">ionic build android</code> command, those files are copied to the correct folder.</p>
</li>
<li _ngcontent-lpp-c12=""><p _ngcontent-lpp-c12="">The images for the <code _ngcontent-lpp-c12="">smallIcon</code> property need to be created.</p>
</li>
</ul>
<h2 id="how-big-are-the-status-bar-icons" _ngcontent-lpp-c12="">How Big Are The Status Bar Icons?</h2>
<p _ngcontent-lpp-c12="">The status bar icons need to be created for each Android screen pixel density. With a little research I was able to find out what sizes are required:</p>
<blockquote _ngcontent-lpp-c12="">
<p _ngcontent-lpp-c12="">22 × 22 area in 24 × 24 (mdpi)<br _ngcontent-lpp-c12="">
33 × 33 area in 36 × 36 (hdpi)<br _ngcontent-lpp-c12="">
44 × 44 area in 48 × 48 (xhdpi)<br _ngcontent-lpp-c12="">
66 × 66 area in 72 × 72 (xxhdpi)<br _ngcontent-lpp-c12="">
88 × 88 area in 96 × 96 (xxxhdpi)<br _ngcontent-lpp-c12=""><br _ngcontent-lpp-c12="">
Reference: <a href="http://iconhandbook.co.uk/reference/chart/android/" _ngcontent-lpp-c12="">Icon Handbook</a></p>
</blockquote>
<p _ngcontent-lpp-c12="">The above reference is telling us that, for instance, for the xxxhdpi screen density a 96 x 96 pixel icon file using an area 88 x 88 pixels need to be created. Basically, center your 88 x 88 pixel graphic in your 96 x 96 pixel image.</p>
<p _ngcontent-lpp-c12="">Per the <a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design.html" _ngcontent-lpp-c12="">Android guidelines</a>, you should use the prefix <code _ngcontent-lpp-c12="">ic_stat_notify_</code> ("ic" for icon, "stat" for status bar, "notify" for notification) for the image name. These files should be white on transparency and should be saved in the PNG file format. For the purpose of this example, I simply used the name <code _ngcontent-lpp-c12="">ic_stat_notify</code> as I was only using one file for every notification. Each file should be placed into the proper screen density folder. For instance, the 36 x 36 icon image for the hdpi screen density should go into the <code _ngcontent-lpp-c12="">platforms/android/res/drawable-hdpi</code> folder.</p>
<blockquote _ngcontent-lpp-c12="">
<p _ngcontent-lpp-c12=""><strong _ngcontent-lpp-c12="">Please Note:</strong> You can put these files into the <code _ngcontent-lpp-c12="">platforms/android/res/</code> folders, but if you ever need to run the <code _ngcontent-lpp-c12="">ionic platform remove android</code> command, you'll find that those images have disappeared. Also, if you are working with a team, since the platform folder normally isn't stored in your code repository each team member will need to manually move these files into place. Guess what happens if the icons change. A pain, right? <strong _ngcontent-lpp-c12="">So don't do it and continue reading.</strong></p>
</blockquote>
<h2 id="how-can-i-get-the-icons-there-automagically" _ngcontent-lpp-c12="">How Can I Get The Icons There Automagically?</h2>
<p _ngcontent-lpp-c12="">As you can see from the notice above, manually moving these files into place might cause all kinds of troubles for you and your team.</p>
<p _ngcontent-lpp-c12="">During my research for this feature I found <a href="https://github.com/katzer/cordova-plugin-local-notifications/issues/504#issuecomment-139235623" _ngcontent-lpp-c12="">this little nugget</a>. Below you will find code that will assist with placing these files into the proper places automatically.</p>
<p _ngcontent-lpp-c12="">This Javascript file should be placed into your <code _ngcontent-lpp-c12="">hooks/after_prepare/</code> folder. I don't think it matters how the file is named (the ReadMe says "Any scripts you add to these directories will be executed before and after the commands corresponding to the directory name.") but the files in this folder are processed when you build your project. To find out more about how this works, take a look at the <code _ngcontent-lpp-c12="">hooks/ReadMe.md</code> file.</p>
<p _ngcontent-lpp-c12="">This code assumes you have files named "ic_stat_notify.png" inside a folder at the root of your project named <code _ngcontent-lpp-c12="">ic_status_images/{screen density}/</code>. Set up your folder structure any way you like and edit this code to reflect those changes.</p>
<pre _ngcontent-lpp-c12=""><code class="language-js" _ngcontent-lpp-c12="">/*      file: hooks/after_prepare/add_platform_class.js     */


#!/usr/bin/env node

var filestocopy = [
    {
        "ic_status_images/mdpi/ic_stat_notify.png":
        "platforms/android/res/drawable-mdpi/ic_stat_notify.png"
    },
    {
        "ic_status_images/hdpi/ic_stat_notify.png":
        "platforms/android/res/drawable-hdpi/ic_stat_notify.png"
    },
    {
        "ic_status_images/xhdpi/ic_stat_notify.png":
        "platforms/android/res/drawable-xhdpi/ic_stat_notify.png"
    },
    {
        "ic_status_images/xxhdpi/ic_stat_notify.png":
        "platforms/android/res/drawable-xxhdpi/ic_stat_notify.png"
    },
    {
        "ic_status_images/xxxhdpi/ic_stat_notify.png":
        "platforms/android/res/drawable-xxxhdpi/ic_stat_notify.png"
    }
];

var fs = require('fs');
var path = require('path');

// no need to configure below
var rootdir = process.argv[2];
console.log("");
console.log("~~~~ Start Copying Notification Status Icons");
filestocopy.forEach(function (obj) {
    Object.keys(obj).forEach(function (key) {
        var val = obj[key];
        var srcfile = path.join(rootdir, key);
        var destfile = path.join(rootdir, val);
        console.log("copying: " + srcfile);
        console.log("     to: " + destfile);
        var destdir = path.dirname(destfile);
        if (fs.existsSync(srcfile) &amp;&amp; fs.existsSync(destdir)) {
            fs.createReadStream(srcfile).pipe(
                fs.createWriteStream(destfile));
        }
    });
});
console.log("~~~~ End Copying Notification Status Icons");
console.log("");
</code></pre>
<h2 id="summary" _ngcontent-lpp-c12="">Summary</h2>
<p _ngcontent-lpp-c12="">I hope this article assists folks with using Local Notifications on Android. Let me know if you have further insights.</p>
<p _ngcontent-lpp-c12=""><a href="https://twitter.com/leifwells" class="twitter-follow-button" data-show-count="false" data-size="large" _ngcontent-lpp-c12="">Follow @leifwells</a></p>
<script _ngcontent-lpp-c12="">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<!--scullyContent-end--><script>try {window['scullyContent'] = {cssId:"_ngcontent-lpp-c12",html:document.body.innerHTML.split('<!--scullyContent-begin-->')[1].split('<!--scullyContent-end-->')[0]};} catch(e) {console.error('scully could not parse content');}</script><scully-content _ngcontent-lpp-c12=""></scully-content>
    </div>
  </article>
  
</div>
</app-blog><!----></div><app-footer _ngcontent-lpp-c10="" _nghost-lpp-c9=""><div _ngcontent-lpp-c9="" class="footer"><app-social-media _ngcontent-lpp-c9="" _nghost-lpp-c8=""><div _ngcontent-lpp-c8="" class="social-media"><ul _ngcontent-lpp-c8="" class="social-icons"><li _ngcontent-lpp-c8=""><a _ngcontent-lpp-c8="" href="https://twitter.com/leifwells" class="social-icon"><i _ngcontent-lpp-c8="" class="fa fa-twitter"></i></a></li><li _ngcontent-lpp-c8=""><a _ngcontent-lpp-c8="" href="https://www.linkedin.com/in/leifwells/" class="social-icon"><i _ngcontent-lpp-c8="" class="fa fa-linkedin"></i></a></li><li _ngcontent-lpp-c8=""><a _ngcontent-lpp-c8="" href="https://github.com/leifwells" class="social-icon"><i _ngcontent-lpp-c8="" class="fa fa-github"></i></a></li></ul></div></app-social-media><div _ngcontent-lpp-c9="" class="copyright-container"><p _ngcontent-lpp-c9=""> Copyright © Leif Wells, leifwells.github.io and leifwells.com, 2016. </p><p _ngcontent-lpp-c9=""> Unauthorized use and/or duplication of this material without express and written permission from this site’s author and/or owner is strictly prohibited. Excerpts and links may be used, provided that full and clear credit is given to Leif Wells, leifwells.github.io and leifwells.com with appropriate and specific direction to the original content. </p></div></div></app-footer></div></app-main-nav></app-root>
  <script id="ScullyIO-transfer-state"></script>

</body></html>